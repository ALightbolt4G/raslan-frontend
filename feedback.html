<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชูููู ุฎุฏูุฉ ูุดุฑู ููุฑูุจ ุฑุณูุงู</title>
    <link rel="stylesheet" href="styles/feedback.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="https://dl.dropboxusercontent.com/scl/fi/3wxmcrpin4801l00fzpop/favicon.png?rlkey=eg10mnljj2r5sad2rtnicx8q6&st=lr4ya4du" type="image/png">
    <style>
        /* ุชูุณููุงุช ุฅุถุงููุฉ ูุฏูุฌุฉ ููุชุฃูุฏ ูู ุงูุนูู */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* ุถูุงู ุนูู ุงูุชูุณููุงุช ุงูุฃุณุงุณูุฉ */
        .fade-in {
            animation: fadeIn 0.6s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- ูุณู ุชุณุฌูู ุงูุฏุฎูู -->
        <div id="login-section" class="login-section">
            <div class="login-container fade-in">
                <div class="login-header">
                    <img src="https://dl.dropboxusercontent.com/scl/fi/3wxmcrpin4801l00fzpop/favicon.png?rlkey=eg10mnljj2r5sad2rtnicx8q6&st=lr4ya4du" 
                         alt="ุดุนุงุฑ ูุดุฑู ููุฑูุจ ุฑุณูุงู" class="logo">
                    <h1>ุชูููู ุงูุฎุฏูุฉ โญ</h1>
                    <p>ุฃุฏุฎู ุจูุงูุงุช ุญุณุงุจู ูุชูููู ุชุฌุฑุจุชู</p>
                </div>
                
                <form id="login-form" class="login-form">
                    <div class="input-group required">
                        <label for="client-id">ุฑูู ุงูุญุณุงุจ:</label>
                        <input type="text" 
                               id="client-id" 
                               name="client-id"
                               placeholder="ุฃุฏุฎู ุฑูู ุญุณุงุจู" 
                               required
                               aria-required="true">
                        <span class="sr-only">ูุทููุจ</span>
                    </div>
                    
                    <div class="input-group required">
                        <label for="client-phone">ุฑูู ุงููุงุชู:</label>
                        <input type="tel" 
                               id="client-phone" 
                               name="client-phone"
                               placeholder="01xxxxxxxxx" 
                               pattern="^01[0-9]{9}$"
                               required
                               aria-required="true"
                               aria-describedby="phone-hint">
                        <small class="hint" id="phone-hint">ูุฌุจ ุฃู ูุจุฏุฃ ุจู 01 ููุญุชูู ุนูู 11 ุฑููุงู</small>
                    </div>
                    
                    <button type="submit" class="btn-primary" aria-label="ูุชุงุจุนุฉ ุงูุชูููู">
                        <i class="fas fa-star" aria-hidden="true"></i>
                        ูุชุงุจุนุฉ ุงูุชูููู
                    </button>
                </form>
                
                <div class="login-links">
                    <a href="login.html" class="link" aria-label="ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ">
                        <i class="fas fa-user-plus" aria-hidden="true"></i>
                        ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
                    </a>
                    <a href="login.html" class="link" aria-label="ุงุณุชุนุงุฏุฉ ุญุณุงุจ">
                        <i class="fas fa-key" aria-hidden="true"></i>
                        ูุณูุช ุฑูู ุญุณุงุจูุ
                    </a>
                </div>
            </div>
        </div>

        <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
        <div id="main-content" class="main-content" style="display: none;" aria-hidden="true">
            <!-- ุดุฑูุท ุงููุนูููุงุช -->
            <header class="app-header">
                <div class="header-content">
                    <div class="client-info">
                        <div class="client-avatar" aria-hidden="true">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="client-details">
                            <span class="client-name" id="client-name">ุงูุนููู</span>
                            <span class="client-id">ID: <span id="client-id-display">0</span></span>
                        </div>
                    </div>
                    <button id="logout-btn" class="btn-logout" aria-label="ุชุบููุฑ ุงูุญุณุงุจ">
                        <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                        ุชุบููุฑ ุงูุญุณุงุจ
                    </button>
                </div>
            </header>

            <!-- ูุญุชูู ุงูุชุทุจูู -->
            <main class="app-main">
                <!-- ุฑุณุงูุฉ ุชุฑุญูุจ -->
                <section class="welcome-section fade-in">
                    <h1>ูุดุฑู ููุฑูุจ ุฑุณูุงู ุงููุตุฑู</h1>
                    <p class="subtitle">ุดุงุฑููุง ุฑุฃูู ููุณุงุนุฏู ุจุดูู ุฃูุถู</p>
                </section>

                <!-- ุดุงุดุฉ ุงูุชุญููู -->
                <div id="loading" class="loading" style="display: none;" aria-live="polite" aria-label="ุฌุงุฑู ุงูุชุญููู">
                    <div class="spinner" aria-hidden="true"></div>
                    <p>ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
                </div>

                <!-- ูููุฐุฌ ุงูุชูููู -->
                <section class="feedback-section" aria-labelledby="feedback-title">
                    <div class="section-card shadow-glow fade-in">
                        <h2 class="section-title" id="feedback-title">
                            <i class="fas fa-star" aria-hidden="true"></i>
                            ุชูููู ุงูุฎุฏูุฉ
                        </h2>
                        
                        <!-- ุงููุฌูู -->
                        <div class="rating-section">
                            <h3>ููู ุชููู ุชุฌุฑุจุชู ูุนูุงุ</h3>
                            <div class="stars-container">
                                <div class="stars" role="group" aria-labelledby="rating-label">
                                    <span id="rating-label" class="sr-only">ุชูููู ูู 5 ูุฌูู</span>
                                    <span class="star" data-rating="1" role="radio" aria-checked="false" tabindex="0" aria-label="ูุฌูุฉ ูุงุญุฏุฉ - ุณูุก ุฌุฏุงู">โ</span>
                                    <span class="star" data-rating="2" role="radio" aria-checked="false" tabindex="0" aria-label="ูุฌูุชูู - ุณูุก">โ</span>
                                    <span class="star" data-rating="3" role="radio" aria-checked="false" tabindex="0" aria-label="ุซูุงุซ ูุฌูู - ูุชูุณุท">โ</span>
                                    <span class="star" data-rating="4" role="radio" aria-checked="false" tabindex="0" aria-label="ุฃุฑุจุน ูุฌูู - ุฌูุฏ">โ</span>
                                    <span class="star" data-rating="5" role="radio" aria-checked="false" tabindex="0" aria-label="ุฎูุณ ูุฌูู - ููุชุงุฒ">โ</span>
                                </div>
                                <div class="rating-text" id="rating-text" aria-live="polite">ุงุถุบุท ุนูู ุงููุฌูู ููุชูููู</div>
                            </div>
                            <input type="hidden" id="rating" name="rating" required aria-hidden="true">
                        </div>

                        <!-- ุงูุฅูููุฌูุฒ -->
                        <div class="emoji-section">
                            <h3>ูุง ูู ุดุนูุฑู ุชุฌุงู ุงูุฎุฏูุฉุ</h3>
                            <div class="emojis-container" role="group" aria-labelledby="emoji-label">
                                <span id="emoji-label" class="sr-only">ุงุฎุชูุงุฑ ุดุนูุฑ ุชุฌุงู ุงูุฎุฏูุฉ</span>
                                <div class="emoji-item" data-emoji="๐" role="radio" aria-checked="false" tabindex="0">
                                    <span class="emoji" aria-hidden="true">๐</span>
                                    <span class="emoji-label">ุณูุก</span>
                                </div>
                                <div class="emoji-item" data-emoji="๐" role="radio" aria-checked="false" tabindex="0">
                                    <span class="emoji" aria-hidden="true">๐</span>
                                    <span class="emoji-label">ูุชูุณุท</span>
                                </div>
                                <div class="emoji-item" data-emoji="๐" role="radio" aria-checked="false" tabindex="0">
                                    <span class="emoji" aria-hidden="true">๐</span>
                                    <span class="emoji-label">ุฌูุฏ</span>
                                </div>
                                <div class="emoji-item" data-emoji="๐" role="radio" aria-checked="false" tabindex="0">
                                    <span class="emoji" aria-hidden="true">๐</span>
                                    <span class="emoji-label">ููุชุงุฒ</span>
                                </div>
                            </div>
                            <input type="hidden" id="selectedEmoji" name="selectedEmoji" value="๐" aria-hidden="true">
                        </div>

                        <!-- ุงูุชุนููู -->
                        <div class="comment-section">
                            <h3>ููุงุญุธุงุชู ุชุณุงุนุฏูุง ุนูู ุงูุชุญุณูู</h3>
                            <div class="input-group">
                                <label for="comment" class="sr-only">ุชุนูููู</label>
                                <textarea 
                                    id="comment" 
                                    name="comment" 
                                    placeholder="ุงูุชุจ ุชุนูููู ููุง... (ุงุฎุชูุงุฑู)"
                                    rows="4"
                                    maxlength="500"
                                    aria-describedby="char-counter"
                                ></textarea>
                                <div class="char-count" id="char-counter">
                                    <span id="char-count" class="count-normal">0</span>/500 ุญุฑู
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ุชูุงุตูู ุงูุนููู -->
                    <div class="section-card shadow-glow fade-in">
                        <h2 class="section-title">
                            <i class="fas fa-user-circle" aria-hidden="true"></i>
                            ูุนูููุงุชู
                        </h2>
                        <div class="client-details-grid">
                            <div class="detail-card">
                                <i class="fas fa-user" aria-hidden="true"></i>
                                <div>
                                    <div class="detail-label">ุงูุงุณู</div>
                                    <div id="display-name" class="detail-value">-</div>
                                </div>
                            </div>
                            <div class="detail-card">
                                <i class="fas fa-phone" aria-hidden="true"></i>
                                <div>
                                    <div class="detail-label">ุงููุงุชู</div>
                                    <div id="display-phone" class="detail-value">-</div>
                                </div>
                            </div>
                            <div class="detail-card">
                                <i class="fas fa-history" aria-hidden="true"></i>
                                <div>
                                    <div class="detail-label">ุนููู ููุฐ</div>
                                    <div id="display-member-since" class="detail-value">-</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ุฒุฑ ุฅุฑุณุงู ุงูุชูููู -->
                    <button id="submit-feedback" class="btn-whatsapp pulse" onclick="handleFeedbackSubmit(event)">
                        <i class="fas fa-paper-plane" aria-hidden="true"></i>
                        ุฅุฑุณุงู ุงูุชูููู
                    </button>
                </section>

                <!-- ูุณู ุงูุฅุญุตุงุฆูุงุช (ุงุฎุชูุงุฑู) -->
                <section class="stats-section" aria-labelledby="stats-title" style="display: none;">
                    <div class="section-card">
                        <h2 class="section-title" id="stats-title">
                            <i class="fas fa-chart-bar" aria-hidden="true"></i>
                            ุฅุญุตุงุฆูุงุช ุงูุชููููุงุช
                        </h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-star" aria-hidden="true"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-value" id="avg-rating">0.0</div>
                                    <div class="stat-label">ูุชูุณุท ุงูุชูููู</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-comments" aria-hidden="true"></i>
                                </div>
                                <div class="stat-info">
                                    <div class="stat-value" id="total-feedbacks">0</div>
                                    <div class="stat-label">ุนุฏุฏ ุงูุชููููุงุช</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูุชูุจููุงุช -->
    <div id="alert-modal" class="modal alert-modal" role="dialog" aria-labelledby="alert-title" aria-modal="true" style="display: none;">
        <div class="modal-content">
            <div class="alert-icon" id="alert-icon" aria-hidden="true">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3 id="alert-title">ุชู ุจูุฌุงุญ</h3>
            <p id="alert-message">ุฑุณุงูุฉ ุงูุชูุจูู</p>
            <button class="btn-primary" id="close-alert" aria-label="ุญุณูุงู">
                ุญุณูุงู
            </button>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูุชุฃููุฏ -->
    <div id="confirm-modal" class="modal alert-modal" role="dialog" aria-labelledby="confirm-title" aria-modal="true" style="display: none;">
        <div class="modal-content">
            <div class="alert-icon" aria-hidden="true">
                <i class="fas fa-question-circle"></i>
            </div>
            <h3 id="confirm-title">ุชุฃููุฏ ุงูุฅุฌุฑุงุก</h3>
            <p id="confirm-message">ูู ุฃูุช ูุชุฃูุฏ ูู ุฃูู ุชุฑูุฏ ุงููุชุงุจุนุฉุ</p>
            <div class="modal-actions">
                <button class="btn-secondary" id="cancel-confirm" aria-label="ุฅูุบุงุก">
                    ุฅูุบุงุก
                </button>
                <button class="btn-primary" id="confirm-action" aria-label="ุชุฃููุฏ">
                    ุชุฃููุฏ
                </button>
            </div>
        </div>
    </div>

    <!-- ุงููููู ุงูุนุธูู ููุชุญููู -->
    <div id="skeleton-loading" cla  ss="skeleton-container" style="display: none;">
        <div class="skeleton-card">
            <div class="skeleton-line short"></div>
            <div class="skeleton-line medium"></div>
            <div class="skeleton-line"></div>
            <div class="skeleton-line short"></div>
        </div>
        <div class="skeleton-card">
            <div class="skeleton-line short"></div>
            <div class="skeleton-line medium"></div>
            <div class="skeleton-line"></div>
        </div>
    </div>

    <script src="scripts/feedback.js"></script>
    
    <script>
        // ููุฏ ุชููุฆุฉ ุฅุถุงูู ููุชุฃูุฏ ูู ุนูู ุฌููุน ุงูููุฒุงุช
        document.addEventListener('DOMContentLoaded', function() {
            console.log('โ ุชู ุชุญููู ุตูุญุฉ ุงูุชูููู ุจูุฌุงุญ');
            
            // ุฅุถุงูุฉ ุชุฃุซูุฑุงุช ุชูุงุนููุฉ ุฅุถุงููุฉ
            const stars = document.querySelectorAll('.star');
            const emojis = document.querySelectorAll('.emoji-item');
            const commentTextarea = document.getElementById('comment');
            const charCount = document.getElementById('char-count');
            
            // ุชุฃุซูุฑุงุช ุงููุฌูู
            stars.forEach(star => {
                star.addEventListener('mouseenter', function() {
                    this.classList.add('hover');
                });
                
                star.addEventListener('mouseleave', function() {
                    this.classList.remove('hover');
                });
                
                star.addEventListener('click', function() {
                    const rating = this.getAttribute('data-rating');
                    selectStar(rating);
                });
                
                // ุฏุนู ููุญุฉ ุงูููุงุชูุญ
                star.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const rating = this.getAttribute('data-rating');
                        selectStar(rating);
                    }
                });
            });
            
            // ุชุฃุซูุฑุงุช ุงูุฅูููุฌูุฒ
            emojis.forEach(emoji => {
                emoji.addEventListener('click', function() {
                    const selectedEmoji = this.getAttribute('data-emoji');
                    selectEmoji(this, selectedEmoji);
                });
                
                emoji.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const selectedEmoji = this.getAttribute('data-emoji');
                        selectEmoji(this, selectedEmoji);
                    }
                });
            });
            
            // ุนุฏุงุฏ ุงูุฃุญุฑู
            if (commentTextarea && charCount) {
                commentTextarea.addEventListener('input', function() {
                    const length = this.value.length;
                    charCount.textContent = length;
                    
                    // ุชุญุฏูุซ ุงูููู ุญุณุจ ุนุฏุฏ ุงูุฃุญุฑู
                    charCount.className = 'count-normal';
                    if (length > 450) {
                        charCount.className = 'count-danger';
                    } else if (length > 300) {
                        charCount.className = 'count-warning';
                    }
                });
            }
            
            // ูุธุงุฆู ูุณุงุนุฏุฉ
            function selectStar(rating) {
                stars.forEach((star, index) => {
                    const isActive = index < rating;
                    star.classList.toggle('active', isActive);
                    star.setAttribute('aria-checked', isActive);
                    
                    if (isActive) {
                        star.classList.add('animated');
                        setTimeout(() => star.classList.remove('animated'), 600);
                    }
                });
                
                // ุชุญุฏูุซ ูุต ุงูุชูููู
                const ratingText = document.getElementById('rating-text');
                const texts = {
                    1: 'ุณูุก ุฌุฏุงู ๐',
                    2: 'ุณูุก ๐',
                    3: 'ูุชูุณุท ๐',
                    4: 'ุฌูุฏ ๐',
                    5: 'ููุชุงุฒ ๐'
                };
                ratingText.textContent = texts[rating] || 'ุงุถุบุท ุนูู ุงููุฌูู ููุชูููู';
                ratingText.classList.add('active');
                
                // ุชุญุฏูุซ ุงูุญูู ุงููุฎูู
                document.getElementById('rating').value = rating;
            }
            
            function selectEmoji(element, emoji) {
                emojis.forEach(emojiItem => {
                    emojiItem.classList.remove('selected', 'animated');
                    emojiItem.setAttribute('aria-checked', 'false');
                });
                
                element.classList.add('selected', 'animated');
                element.setAttribute('aria-checked', 'true');
                document.getElementById('selectedEmoji').value = emoji;
                
                // ุฅุฒุงูุฉ class animated ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุชุญุฑูู
                setTimeout(() => {
                    element.classList.remove('animated');
                }, 600);
            }
            
            // ุชููุฆุฉ ุงูููู ุงูุงูุชุฑุงุถูุฉ
            window.selectStar = selectStar;
            window.selectEmoji = selectEmoji;
        });
    </script>
</body>
</html>